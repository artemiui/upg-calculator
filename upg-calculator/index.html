<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UPG Calculator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <img src="logo.png" alt="UPG Calculator" class="app-logo" />
    <div class="actions">
      <button id="open-about" class="small ghost" title="About and Usage">About</button>
      <div class="theme" title="Toggle theme">
        <input id="theme-toggle" class="theme__toggle" type="checkbox" role="switch" aria-label="Toggle theme" />
        <span class="theme__fill"></span>
        <span class="theme__icon">
          <span class="theme__icon-part"></span>
          <span class="theme__icon-part"></span>
          <span class="theme__icon-part"></span>
          <span class="theme__icon-part"></span>
          <span class="theme__icon-part"></span>
          <span class="theme__icon-part"></span>
          <span class="theme__icon-part"></span>
          <span class="theme__icon-part"></span>
          <span class="theme__icon-part"></span>
        </span>
      </div>
    </div>
  </header>

  <div class="layout">
    <aside class="sidebar">
      <div class="sidebar-top">
        <div class="card gwa-card" aria-live="polite">
          <div class="header">
            <div class="title">Estimated GWA</div>
          </div>
          <div class="range">
            <span class="range-value" id="gwa-value">–</span>
            <span class="range-unit">GWA</span>
          </div>
          <div class="date-range">Scale: 1.00 highest, 5.00 lowest</div>
          <div class="chart-container">
            <div class="avg-line"></div>
            <div class="avg-label" id="gwa-avg-label">Avg</div>
            <div class="y-label top">1.0</div>
            <div class="y-label bottom">5.0</div>
            <div class="chart" id="gwa-chart"></div>
          </div>
          <div class="readings">
            <div class="reading">
              <span class="reading-time">Lowest</span>
              <span class="reading-value" id="gwa-lowest">–</span>
            </div>
            <div class="reading">
              <span class="reading-time">Highest</span>
              <span class="reading-value" id="gwa-highest">–</span>
            </div>
          </div>
        </div>
        <div class="sidebar-title">Subjects</div>
        <button id="add-subject" class="cssbuttons-io-button" aria-label="Add subject">
          <svg aria-hidden="true" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 5v14M5 12h14" />
          </svg>
          <span>Add Subject</span>
        </button>
        <div id="subject-list" class="subject-list"></div>
      </div>
      <div class="sidebar-controls">
        <label class="subtle-action">
          <input id="import-file" type="file" accept="application/json" hidden />
          <span id="import-trigger">Import</span>
        </label>
        <button id="export-data" class="subtle-action">Export</button>
        <button id="reset-data" class="subtle-action danger">Reset</button>
      </div>
    </aside>
    <main>
      <section id="subject-detail"></section>
    </main>
  </div>

  <footer class="app-footer">
    <p>Data auto-saves to your browser. Use sidebar to import/export.</p>
  </footer>

  <div class="watermark">@artemiui</div>

  <template id="subject-template">
    <div class="subject-card">
      <div class="subject-header">
        <div class="form-control subject-name-wrap">
          <input class="subject-name" type="text" required />
          <label aria-hidden="true">
            <span>S</span><span>u</span><span>b</span><span>j</span><span>e</span><span>c</span><span>t</span><span> </span><span>n</span><span>a</span><span>m</span><span>e</span>
          </label>
        </div>
        <div class="subject-quick">
          <div class="stats shadow">
            <div class="stat">
              <div class="stat-title">UPG</div>
              <div class="stat-value"><span class="subject-grade">–</span></div>
              <div class="stat-desc">Percent: <span class="subject-percent">0%</span></div>
            </div>
          </div>
        </div>
      </div>

      <div class="subject-body">
        <div class="subject-controls">
          <button class="add-component">Add Component</button>
          <div class="weights-status"></div>
        </div>

        <div class="components"></div>

        <details class="conversion">
          <summary>Conversion (Percent → Grade 1.0–5.0)</summary>
          <p>Edit thresholds. The first matching row (from top) applies.</p>
          <div class="conversion-rows"></div>
          <button class="add-threshold">Add Threshold</button>
        </details>

        <div class="subject-result"></div>

        <div class="subject-bottom-actions">
          <button class="delete-subject delete-subject-btn" aria-label="Delete subject">
            <svg class="delete-svgIcon" viewBox="0 0 448 512" width="24" height="24" aria-hidden="true">
              <path d="M135.2 17.7C140.6 7.4 151.5 0 163.8 0H284.2c12.3 0 23.2 7.4 28.6 17.7L336 32H432c8.8 0 16 7.2 16 16S440.8 64 432 64H16C7.2 64 0 56.8 0 48S7.2 32 16 32H112l23.2-14.3zM32 96H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V96zm96 64c-8.8 0-16 7.2-16 16V416c0 8.8 7.2 16 16 16s16-7.2 16-16V176c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V416c0 8.8 7.2 16 16 16s16-7.2 16-16V176c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V416c0 8.8 7.2 16 16 16s16-7.2 16-16V176c0-8.8-7.2-16-16-16z" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </template>

  <template id="component-template">
    <div class="component-card">
      <div class="component-header">
        <input class="component-name" type="text" placeholder="Component name" />
        <div class="component-quick">
          <label>Weight % <input class="component-weight" type="number" min="0" step="0.01" /></label>
          <button class="delete-component danger">Delete</button>
        </div>
      </div>

      <div class="entries">
        <table class="entries-table">
          <thead>
            <tr>
              <th>Task</th>
              <th>Score</th>
              <th>Max</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
          <tfoot>
            <tr>
              <td colspan="4" class="tfoot-controls">
                <button class="add-entry">Add Entry</button>
              </td>
            </tr>
          </tfoot>
        </table>
      </div>

      <div class="component-result">
        <div class="component-percent-row">
          <div class="component-percent-label">Component Percent</div>
          <div class="component-percent-bar">
            <div class="bar-fill" style="width: 0%"></div>
            <div class="bar-text">0%</div>
          </div>
        </div>
        <div>Totals: <span class="component-total">0 / 0</span></div>
      </div>
    </div>
  </template>

  <template id="entry-row-template">
    <tr>
      <td><input class="entry-label" type="text" placeholder="Task label" /></td>
      <td><input class="entry-score" type="number" step="0.01" min="0" /></td>
      <td><input class="entry-max" type="number" step="0.01" min="0" /></td>
      <td><button class="delete-entry danger">Delete</button></td>
    </tr>
  </template>

  <template id="threshold-row-template">
    <div class="threshold-row">
      <label>Percent ≥ <input class="threshold-percent" type="number" min="0" max="100" step="0.01" /></label>
      <label>Grade <input class="threshold-grade" type="number" min="1" max="5" step="0.01" /></label>
      <button class="delete-threshold danger">Delete</button>
    </div>
  </template>

  <script src="app.js"></script>
  </body>
  </html>